<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SportPress È´îËÇ≤Êñ∞ËÅûÁî¢Á®øÁ≥ªÁµ±</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&family=Oswald:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #E63946;
            --primary-dark: #B82E3A;
            --secondary: #1D3557;
            --accent: #F4A261;
            --dark: #0D1B2A;
            --dark-surface: #1B2838;
            --dark-card: #243447;
            --text-primary: #F1FAEE;
            --text-secondary: #A8DADC;
            --text-muted: #6B8A8E;
            --success: #2ECC71;
            --warning: #F39C12;
            --border: rgba(168, 218, 220, 0.15);
            --shadow: 0 4px 24px rgba(0, 0, 0, 0.4);
            --radius: 12px;
            --radius-sm: 8px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans TC', sans-serif;
            background: var(--dark);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Login Screen */
        .login-screen {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: 
                radial-gradient(ellipse at 20% 20%, rgba(230, 57, 70, 0.15) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(29, 53, 87, 0.3) 0%, transparent 50%),
                var(--dark);
            padding: 20px;
        }

        .login-container {
            width: 100%;
            max-width: 420px;
            animation: fadeInUp 0.6s ease-out;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .login-logo {
            text-align: center;
            margin-bottom: 40px;
        }

        .login-logo h1 {
            font-family: 'Oswald', sans-serif;
            font-size: 3rem;
            font-weight: 700;
            letter-spacing: 4px;
            color: var(--text-primary);
            text-transform: uppercase;
        }

        .login-logo h1 span {
            color: var(--primary);
        }

        .login-logo p {
            color: var(--text-muted);
            font-size: 0.9rem;
            margin-top: 8px;
            letter-spacing: 2px;
        }

        .login-card {
            background: var(--dark-surface);
            border-radius: var(--radius);
            padding: 40px;
            border: 1px solid var(--border);
            box-shadow: var(--shadow);
        }

        .form-group {
            margin-bottom: 24px;
        }

        .form-group label {
            display: block;
            font-size: 0.85rem;
            font-weight: 500;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 14px 16px;
            background: var(--dark);
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            color: var(--text-primary);
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(230, 57, 70, 0.2);
        }

        .form-group input::placeholder {
            color: var(--text-muted);
        }

        /* Option Buttons */
        .option-buttons {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .option-buttons.style-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
        }

        .option-btn {
            flex: 1;
            min-width: 80px;
            padding: 10px 12px;
            background: var(--dark);
            border: 2px solid var(--border);
            border-radius: var(--radius-sm);
            color: var(--text-muted);
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .option-btn:hover {
            border-color: var(--text-muted);
            color: var(--text-primary);
        }

        .option-btn.active {
            border-color: var(--primary);
            background: rgba(230, 57, 70, 0.15);
            color: var(--text-primary);
        }

        .style-options .option-btn {
            padding: 12px 10px;
            font-size: 0.9rem;
        }

        .highlight-textarea {
            width: 100%;
            min-height: 80px;
            padding: 12px 16px;
            background: var(--dark);
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            color: var(--text-primary);
            font-size: 0.95rem;
            font-family: 'Noto Sans TC', sans-serif;
            resize: vertical;
            transition: all 0.3s ease;
        }

        .highlight-textarea:focus {
            outline: none;
            border-color: var(--primary);
        }

        .highlight-textarea::placeholder {
            color: var(--text-muted);
        }

        /* Checkbox inline style */
        .form-group label input[type="checkbox"] {
            width: auto;
            vertical-align: middle;
        }

        /* IG Photo Required Tag */
        .ig-photo-required {
            font-size: 0.7rem;
            background: var(--warning);
            color: var(--dark);
            padding: 2px 6px;
            border-radius: 4px;
            margin-left: 4px;
        }

        /* Photo Upload Section */
        .photo-upload-section {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid var(--border);
        }

        .photo-upload-section h4 {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.95rem;
            font-weight: 500;
            margin-bottom: 12px;
            color: var(--text-secondary);
        }

        .photo-upload-area {
            border: 2px dashed var(--border);
            border-radius: var(--radius-sm);
            padding: 24px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: var(--dark);
        }

        .photo-upload-area:hover {
            border-color: var(--primary);
            background: rgba(230, 57, 70, 0.05);
        }

        .photo-upload-area.dragover {
            border-color: var(--primary);
            background: rgba(230, 57, 70, 0.1);
        }

        .upload-placeholder {
            color: var(--text-muted);
        }

        .upload-placeholder svg {
            margin-bottom: 12px;
            opacity: 0.5;
        }

        .upload-placeholder p {
            font-size: 0.95rem;
            margin-bottom: 4px;
        }

        .upload-placeholder span {
            font-size: 0.8rem;
            opacity: 0.7;
        }

        .photo-preview {
            position: relative;
            display: inline-block;
        }

        .photo-preview img {
            max-width: 100%;
            max-height: 200px;
            border-radius: var(--radius-sm);
        }

        .remove-photo-btn {
            position: absolute;
            top: -8px;
            right: -8px;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: var(--primary);
            border: none;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .remove-photo-btn:hover {
            background: var(--primary-dark);
            transform: scale(1.1);
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 14px 28px;
            font-size: 1rem;
            font-weight: 600;
            border: none;
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(230, 57, 70, 0.4);
        }

        .btn-primary:disabled {
            background: var(--dark-card);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .btn-secondary {
            background: var(--dark-card);
            color: var(--text-primary);
            border: 1px solid var(--border);
        }

        .btn-secondary:hover {
            background: var(--secondary);
            border-color: var(--secondary);
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-success:hover {
            background: #27ae60;
        }

        .btn-ghost {
            background: transparent;
            color: var(--text-secondary);
            padding: 10px 16px;
        }

        .btn-ghost:hover {
            color: var(--text-primary);
            background: rgba(255, 255, 255, 0.05);
        }

        .btn-full {
            width: 100%;
        }

        /* Main App Layout */
        .app-container {
            display: none;
            min-height: 100vh;
        }

        .app-container.active {
            display: block;
        }

        /* Header */
        .header {
            background: var(--dark-surface);
            border-bottom: 1px solid var(--border);
            padding: 0 24px;
            height: 70px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-logo {
            font-family: 'Oswald', sans-serif;
            font-size: 1.5rem;
            font-weight: 700;
            letter-spacing: 2px;
            color: var(--text-primary);
        }

        .header-logo span {
            color: var(--primary);
        }

        .header-nav {
            display: flex;
            gap: 8px;
        }

        .nav-btn {
            padding: 10px 20px;
            font-size: 0.9rem;
            font-weight: 500;
            background: transparent;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            border-radius: var(--radius-sm);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .nav-btn:hover {
            color: var(--text-primary);
            background: rgba(255, 255, 255, 0.05);
        }

        .nav-btn.active {
            color: var(--primary);
            background: rgba(230, 57, 70, 0.1);
        }

        .header-user {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .user-name {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: var(--text-primary);
        }

        /* Main Content */
        .main-content {
            padding: 32px;
            max-width: 1200px;
            margin: 0 auto;
        }

        /* Page Sections */
        .page-section {
            display: none;
            animation: fadeIn 0.4s ease;
        }

        .page-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Cards */
        .card {
            background: var(--dark-surface);
            border-radius: var(--radius);
            border: 1px solid var(--border);
            padding: 28px;
            margin-bottom: 24px;
        }

        .card-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 24px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card-title svg {
            color: var(--primary);
        }

        /* Two Column Layout */
        .two-column {
            display: grid;
            grid-template-columns: 400px 1fr;
            gap: 24px;
        }

        @media (max-width: 1024px) {
            .two-column {
                grid-template-columns: 1fr;
            }
        }

        /* Input Section */
        .input-section .form-group {
            margin-bottom: 20px;
        }

        /* Draft Section */
        .draft-section {
            display: flex;
            flex-direction: column;
        }

        .draft-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
        }

        .draft-status {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        .draft-status.ready {
            color: var(--success);
        }

        .draft-status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--text-muted);
        }

        .draft-status.ready .draft-status-dot {
            background: var(--success);
        }

        .draft-textarea {
            width: 100%;
            min-height: 350px;
            padding: 20px;
            background: var(--dark);
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            color: var(--text-primary);
            font-size: 1rem;
            line-height: 1.8;
            resize: vertical;
            font-family: 'Noto Sans TC', sans-serif;
            transition: all 0.3s ease;
        }

        .draft-textarea:focus {
            outline: none;
            border-color: var(--primary);
        }

        .draft-textarea::placeholder {
            color: var(--text-muted);
        }

        .draft-textarea:disabled {
            background: var(--dark-card);
            color: var(--text-muted);
        }

        .char-count {
            text-align: right;
            font-size: 0.85rem;
            color: var(--text-muted);
            margin-top: 8px;
        }

        /* Platform Selection */
        .platform-selection {
            margin-top: 24px;
            padding-top: 24px;
            border-top: 1px solid var(--border);
        }

        .platform-selection h4 {
            font-size: 0.95rem;
            font-weight: 500;
            margin-bottom: 16px;
            color: var(--text-secondary);
        }

        .platform-checkboxes {
            display: flex;
            gap: 16px;
            flex-wrap: wrap;
        }

        .platform-checkbox {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 20px;
            background: var(--dark);
            border: 2px solid var(--border);
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .platform-checkbox:hover {
            border-color: var(--text-muted);
        }

        .platform-checkbox.selected {
            border-color: var(--primary);
            background: rgba(230, 57, 70, 0.1);
        }

        .platform-checkbox input {
            display: none;
        }

        .platform-icon {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.85rem;
        }

        .platform-icon.threads { background: #000; color: #fff; }
        .platform-icon.facebook { background: #1877F2; color: #fff; }
        .platform-icon.instagram { background: linear-gradient(45deg, #f09433, #e6683c, #dc2743, #cc2366, #bc1888); color: #fff; }

        .platform-checkbox .check-icon {
            width: 20px;
            height: 20px;
            border: 2px solid var(--border);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-left: auto;
            transition: all 0.3s ease;
        }

        .platform-checkbox.selected .check-icon {
            background: var(--primary);
            border-color: var(--primary);
        }

        .platform-checkbox.selected .check-icon svg {
            display: block;
        }

        .platform-checkbox .check-icon svg {
            display: none;
        }

        /* Action Buttons */
        .action-buttons {
            display: flex;
            gap: 12px;
            margin-top: 24px;
        }

        /* Loading Overlay */
        .loading-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(13, 27, 42, 0.9);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            gap: 20px;
        }

        .loading-overlay.active {
            display: flex;
        }

        .spinner {
            width: 48px;
            height: 48px;
            border: 4px solid var(--border);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading-text {
            font-size: 1.1rem;
            color: var(--text-secondary);
        }

        /* Success Modal */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal {
            background: var(--dark-surface);
            border-radius: var(--radius);
            padding: 40px;
            max-width: 480px;
            width: 100%;
            text-align: center;
            animation: modalIn 0.4s ease;
        }

        @keyframes modalIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        .modal-icon {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 24px;
        }

        .modal-icon.success {
            background: rgba(46, 204, 113, 0.15);
        }

        .modal-icon.success svg {
            color: var(--success);
        }

        .modal h2 {
            font-size: 1.5rem;
            margin-bottom: 16px;
        }

        .modal p {
            color: var(--text-muted);
            margin-bottom: 24px;
        }

        .publish-results {
            text-align: left;
            background: var(--dark);
            border-radius: var(--radius-sm);
            padding: 16px;
            margin-bottom: 24px;
        }

        .publish-result-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 0;
            border-bottom: 1px solid var(--border);
        }

        .publish-result-item:last-child {
            border-bottom: none;
        }

        .publish-result-item svg {
            color: var(--success);
        }

        /* Toast */
        .toast {
            position: fixed;
            bottom: 24px;
            right: 24px;
            padding: 16px 24px;
            background: var(--dark-surface);
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            box-shadow: var(--shadow);
            display: flex;
            align-items: center;
            gap: 12px;
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.4s ease;
            z-index: 1001;
        }

        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }

        .toast.success { border-left: 4px solid var(--success); }
        .toast.error { border-left: 4px solid var(--primary); }

        /* Settings Page */
        .settings-container {
            max-width: 800px;
        }

        .settings-group {
            background: var(--dark-surface);
            border-radius: var(--radius);
            border: 1px solid var(--border);
            padding: 24px;
            margin-bottom: 20px;
        }

        .settings-group-title {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .settings-group-title svg {
            color: var(--primary);
        }

        .setting-item {
            margin-bottom: 20px;
        }

        .setting-item:last-child {
            margin-bottom: 0;
        }

        .setting-item label {
            display: block;
            font-size: 0.9rem;
            font-weight: 500;
            color: var(--text-primary);
            margin-bottom: 6px;
        }

        .setting-item .hint {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-bottom: 10px;
        }

        .setting-item input[type="text"],
        .setting-item input[type="url"],
        .setting-item textarea {
            width: 100%;
            padding: 12px 16px;
            background: var(--dark);
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            color: var(--text-primary);
            font-size: 0.95rem;
            font-family: 'Courier New', monospace;
        }

        .setting-item input:focus,
        .setting-item textarea:focus {
            outline: none;
            border-color: var(--primary);
        }

        .setting-item textarea {
            min-height: 150px;
            resize: vertical;
            font-family: 'Noto Sans TC', sans-serif;
        }

        .input-with-button {
            display: flex;
            gap: 10px;
        }

        .input-with-button input {
            flex: 1;
        }

        .btn-test {
            padding: 12px 20px;
            background: var(--secondary);
            color: var(--text-primary);
            border: none;
            border-radius: var(--radius-sm);
            cursor: pointer;
            font-size: 0.9rem;
            white-space: nowrap;
        }

        .btn-test:hover {
            background: #2a4a7a;
        }

        .test-result {
            margin-top: 10px;
            padding: 10px 14px;
            border-radius: var(--radius-sm);
            font-size: 0.85rem;
            display: none;
        }

        .test-result.success {
            display: block;
            background: rgba(46, 204, 113, 0.15);
            color: var(--success);
        }

        .test-result.error {
            display: block;
            background: rgba(230, 57, 70, 0.15);
            color: var(--primary);
        }

        .settings-actions {
            display: flex;
            gap: 12px;
            margin-top: 24px;
        }

        /* Style Setting Grid */
        .style-setting-grid {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .style-setting-item {
            background: var(--dark);
            border-radius: var(--radius-sm);
            padding: 16px;
            border: 1px solid var(--border);
        }

        .style-setting-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .style-emoji {
            font-size: 1.5rem;
            width: 40px;
            text-align: center;
        }

        .style-emoji-input {
            width: 50px !important;
            font-size: 1.5rem;
            text-align: center;
            padding: 6px !important;
            background: var(--dark-surface);
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
        }

        .style-setting-header input {
            flex: 1;
            padding: 8px 12px;
            background: var(--dark-surface);
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            color: var(--text-primary);
            font-size: 0.95rem;
            font-weight: 500;
        }

        .style-setting-item textarea {
            width: 100%;
            padding: 10px 12px;
            background: var(--dark-surface);
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            color: var(--text-secondary);
            font-size: 0.85rem;
            resize: vertical;
            min-height: 60px;
        }

        /* Variable Tags */
        .variable-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 16px;
        }

        .variable-tag {
            padding: 4px 10px;
            background: var(--secondary);
            border-radius: 4px;
            font-size: 0.75rem;
            color: var(--text-secondary);
            cursor: pointer;
        }

        .variable-tag:hover {
            background: var(--primary);
            color: white;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header { padding: 0 16px; }
            .header-nav { display: none; }
            .main-content { padding: 20px 16px; }
            .platform-checkboxes { flex-direction: column; }
            .action-buttons { flex-direction: column; }
        }

        /* History Section */
        .history-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .history-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px;
            background: var(--dark);
            border-radius: var(--radius-sm);
            border: 1px solid var(--border);
        }

        .history-item-info {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .history-item-avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.1rem;
        }

        .history-item-details h4 {
            font-size: 1rem;
            margin-bottom: 4px;
        }

        .history-item-details p {
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        .history-item-meta {
            text-align: right;
        }

        .history-item-date {
            font-size: 0.85rem;
            color: var(--text-muted);
            margin-bottom: 4px;
        }

        .history-item-platforms {
            display: flex;
            gap: 4px;
            justify-content: flex-end;
        }

        .history-item-platforms span {
            padding: 2px 8px;
            background: var(--dark-card);
            border-radius: 4px;
            font-size: 0.7rem;
            color: var(--text-muted);
        }
    </style>
</head>
<body>
    <!-- Login Screen -->
    <div class="login-screen" id="loginScreen">
        <div class="login-container">
            <div class="login-logo">
                <h1>Sport<span>Press</span></h1>
                <p>È´îËÇ≤Êñ∞ËÅûÁî¢Á®øÁ≥ªÁµ±</p>
            </div>
            <div class="login-card">
                <form id="loginForm">
                    <div class="form-group">
                        <label>Â∏≥Ëôü</label>
                        <input type="text" id="loginUsername" placeholder="Ë´ãËº∏ÂÖ•ÊÇ®ÁöÑÂ∏≥Ëôü" required>
                    </div>
                    <div class="form-group">
                        <label>ÂØÜÁ¢º</label>
                        <input type="password" id="loginPassword" placeholder="Ë´ãËº∏ÂÖ•ÂØÜÁ¢º" required>
                    </div>
                    <button type="submit" class="btn btn-primary btn-full">ÁôªÂÖ•Á≥ªÁµ±</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Main App -->
    <div class="app-container" id="appContainer">
        <!-- Header -->
        <header class="header">
            <div class="header-logo">Sport<span>Press</span></div>
            <nav class="header-nav">
                <button class="nav-btn active" data-page="create">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 20h9"/>
                        <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/>
                    </svg>
                    Áî¢ÁîüË≤ºÊñá
                </button>
                <button class="nav-btn" data-page="history">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <polyline points="12 6 12 12 16 14"/>
                    </svg>
                    ÁôºÊñáÁ¥ÄÈåÑ
                </button>
                <button class="nav-btn" data-page="settings">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="3"/>
                        <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
                    </svg>
                    Á≥ªÁµ±Ë®≠ÂÆö
                </button>
            </nav>
            <div class="header-user">
                <span class="user-name" id="userName">‰ΩøÁî®ËÄÖ</span>
                <div class="user-avatar" id="userAvatar">U</div>
                <button class="btn btn-ghost" id="logoutBtn">ÁôªÂá∫</button>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Create Post Section -->
            <section class="page-section active" id="pageCreate">
                <div class="two-column">
                    <!-- Left: Input -->
                    <div class="input-section">
                        <div class="card">
                            <h3 class="card-title">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="11" cy="11" r="8"/>
                                    <path d="m21 21-4.35-4.35"/>
                                </svg>
                                Ëº∏ÂÖ•ÁêÉÂì°Ë≥áÊñô
                            </h3>
                            
                            <div class="form-group">
                                <label>ÈÅãÂãïÈ°ûÂûã</label>
                                <select id="sportType">
                                    <option value="">Ë´ãÈÅ∏Êìá</option>
                                    <option value="baseball">Ê£íÁêÉ</option>
                                    <option value="basketball">Á±ÉÁêÉ</option>
                                </select>
                            </div>

                            <div class="form-group" id="positionGroup" style="display: none;">
                                <label>‰ΩçÁΩÆ</label>
                                <select id="position">
                                    <option value="">Ë´ãÈÅ∏Êìá</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label>ÁêÉÂì°ÂêçÂ≠ó</label>
                                <input type="text" id="playerName" placeholder="‰æãÂ¶ÇÔºöÊûóÂÆâÂèØ">
                            </div>

                            <div class="form-group">
                                <label>‰ªäÊó•ÈáçÈªûË£úÂÖÖÔºàÈÅ∏Â°´Ôºâ</label>
                                <textarea id="newsHighlight" class="highlight-textarea" placeholder="‰æãÂ¶ÇÔºö‰ªäÊó•3ÊâìÊï∏3ÂÆâÊâìÔºåÂåÖÂê´1ÁôºÊªøË≤´Á†≤ÔºåÂñÆÂ†¥7ÂàÜÊâìÈªûÂâµÁîüÊ∂ØÊñ∞È´ò..."></textarea>
                            </div>

                            <div class="form-group">
                                <label>
                                    <input type="checkbox" id="enableNewsSearch" style="width: auto; margin-right: 8px;">
                                    ÂïüÂãïÊñ∞ËÅûÊêúÂ∞ãËàáË£úÂÖÖ
                                </label>
                                <div class="hint" style="margin-top: 4px;">ÂãæÈÅ∏ÂæåÊúÉÈÄèÈÅé Perplexity ÊêúÂ∞ãË©≤ÁêÉÂì°ÁöÑÊúÄÊñ∞Êñ∞ËÅû‰ΩúÁÇ∫ÂèÉËÄÉ</div>
                            </div>

                            <div class="form-group">
                                <label>ÁôºÊñáÈ¢®Ê†º</label>
                                <div class="option-buttons style-options" id="styleOptions">
                                    <button type="button" class="option-btn active" data-value="style1">üì∞ Â∞àÊ•≠Ê≠£Âºè</button>
                                    <button type="button" class="option-btn" data-value="style2">üî• ÁÜ±Ë°ÄÊøÄÊòÇ</button>
                                    <button type="button" class="option-btn" data-value="style3">üòÑ ÂπΩÈªòÈ¢®Ë∂£</button>
                                    <button type="button" class="option-btn" data-value="style4">üìä Êï∏ÊìöÂàÜÊûê</button>
                                    <button type="button" class="option-btn" data-value="style5">üìñ ÊïÖ‰∫ãÊïòËø∞</button>
                                </div>
                            </div>

                            <button class="btn btn-primary btn-full" id="generateBtn">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>
                                </svg>
                                Áî¢ÁîüÁ§æÁæ§Ë≤ºÊñá
                            </button>
                            
                            <div class="webhook-status" id="webhookStatus" style="margin-top: 12px; padding: 10px; border-radius: 8px; font-size: 0.8rem; text-align: center;">
                                <!-- Status will be updated by JS -->
                            </div>
                        </div>
                    </div>

                    <!-- Right: Draft -->
                    <div class="draft-section">
                        <div class="card" style="flex: 1; display: flex; flex-direction: column;">
                            <div class="draft-header">
                                <h3 class="card-title" style="margin-bottom: 0;">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                                        <polyline points="14 2 14 8 20 8"/>
                                        <line x1="16" y1="13" x2="8" y2="13"/>
                                        <line x1="16" y1="17" x2="8" y2="17"/>
                                    </svg>
                                    Ë≤ºÊñáËçâÁ®ø
                                </h3>
                                <div class="draft-status" id="draftStatus">
                                    <span class="draft-status-dot"></span>
                                    <span>Á≠âÂæÖÁî¢Áîü</span>
                                </div>
                            </div>

                            <textarea class="draft-textarea" id="draftContent" placeholder="Ëº∏ÂÖ•ÁêÉÂì°ÂêçÂ≠óÂæåÔºåÈªûÊìä„ÄåÁî¢ÁîüÁ§æÁæ§Ë≤ºÊñá„ÄçÔºåAI ÊúÉËá™ÂãïÁî¢ÁîüË≤ºÊñáÂÖßÂÆπ...&#10;&#10;‰Ω†ÂèØ‰ª•Âú®ÈÄôË£°Á∑®ËºØ‰øÆÊîπÂÖßÂÆπ„ÄÇ" disabled></textarea>
                            <div class="char-count"><span id="charCount">0</span> Â≠ó</div>

                            <!-- Platform Selection -->
                            <div class="platform-selection">
                                <h4>ÈÅ∏ÊìáÁôºÂ∏ÉÂπ≥Âè∞</h4>
                                <div class="platform-checkboxes">
                                    <label class="platform-checkbox" data-platform="threads">
                                        <input type="checkbox" value="threads">
                                        <div class="platform-icon threads">@</div>
                                        <span>Threads</span>
                                        <div class="check-icon">
                                            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="3">
                                                <polyline points="20 6 9 17 4 12"/>
                                            </svg>
                                        </div>
                                    </label>
                                    <label class="platform-checkbox" data-platform="facebook">
                                        <input type="checkbox" value="facebook">
                                        <div class="platform-icon facebook">f</div>
                                        <span>Facebook</span>
                                        <div class="check-icon">
                                            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="3">
                                                <polyline points="20 6 9 17 4 12"/>
                                            </svg>
                                        </div>
                                    </label>
                                    <label class="platform-checkbox" data-platform="instagram">
                                        <input type="checkbox" value="instagram">
                                        <div class="platform-icon instagram">IG</div>
                                        <span>Instagram</span>
                                        <span class="ig-photo-required">ÈúÄ‰∏äÂÇ≥ÁÖßÁâá</span>
                                        <div class="check-icon">
                                            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="3">
                                                <polyline points="20 6 9 17 4 12"/>
                                            </svg>
                                        </div>
                                    </label>
                                </div>

                                <!-- Photo Upload -->
                                <div class="photo-upload-section" id="photoUploadSection">
                                    <h4>
                                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                                            <circle cx="8.5" cy="8.5" r="1.5"/>
                                            <polyline points="21 15 16 10 5 21"/>
                                        </svg>
                                        ‰∏äÂÇ≥ÁÖßÁâáÔºàÈÅ∏Â°´ÔºåIG ÂøÖÈ†àÔºâ
                                    </h4>
                                    <div class="photo-upload-area" id="photoUploadArea">
                                        <input type="file" id="photoInput" accept="image/*" style="display: none;">
                                        <div class="upload-placeholder" id="uploadPlaceholder">
                                            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                                <polyline points="17 8 12 3 7 8"/>
                                                <line x1="12" y1="3" x2="12" y2="15"/>
                                            </svg>
                                            <p>ÈªûÊìäÊàñÊãñÊõ≥‰∏äÂÇ≥ÁÖßÁâá</p>
                                            <span>ÊîØÊè¥ JPG„ÄÅPNG„ÄÅGIFÔºàÊúÄÂ§ß 5MBÔºâ</span>
                                        </div>
                                        <div class="photo-preview" id="photoPreview" style="display: none;">
                                            <img id="previewImage" src="" alt="Preview">
                                            <button class="remove-photo-btn" id="removePhotoBtn" type="button">
                                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                    <line x1="18" y1="6" x2="6" y2="18"/>
                                                    <line x1="6" y1="6" x2="18" y2="18"/>
                                                </svg>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="action-buttons">
                                <button class="btn btn-secondary" id="clearBtn">
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M3 6h18"/>
                                        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                                    </svg>
                                    Ê∏ÖÈô§
                                </button>
                                <button class="btn btn-success" id="publishBtn" disabled>
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M22 2 11 13"/>
                                        <path d="m22 2-7 20-4-9-9-4 20-7z"/>
                                    </svg>
                                    ÁôºÂ∏ÉË≤ºÊñá
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- History Section -->
            <section class="page-section" id="pageHistory">
                <div class="card">
                    <h3 class="card-title">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <polyline points="12 6 12 12 16 14"/>
                        </svg>
                        ÁôºÊñáÁ¥ÄÈåÑ
                    </h3>
                    <div class="history-list" id="historyList">
                        <!-- History items will be populated here -->
                        <div class="history-item">
                            <div class="history-item-info">
                                <div class="history-item-avatar">Êûó</div>
                                <div class="history-item-details">
                                    <h4>ÊûóÂÆâÂèØ</h4>
                                    <p>Ê£íÁêÉ / ÈáéÊâã</p>
                                </div>
                            </div>
                            <div class="history-item-meta">
                                <div class="history-item-date">2025/01/21 14:30</div>
                                <div class="history-item-platforms">
                                    <span>Threads</span>
                                    <span>FB</span>
                                </div>
                            </div>
                        </div>
                        <div class="history-item">
                            <div class="history-item-info">
                                <div class="history-item-avatar">Èô≥</div>
                                <div class="history-item-details">
                                    <h4>Èô≥ÁõàÈßø</h4>
                                    <p>Á±ÉÁêÉ</p>
                                </div>
                            </div>
                            <div class="history-item-meta">
                                <div class="history-item-date">2025/01/20 18:00</div>
                                <div class="history-item-platforms">
                                    <span>Threads</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Settings Section -->
            <section class="page-section" id="pageSettings">
                <div class="settings-container">
                    <h2 style="margin-bottom: 24px;">Á≥ªÁµ±Ë®≠ÂÆö</h2>

                    <!-- Webhook 1: Generate Post -->
                    <div class="settings-group">
                        <h3 class="settings-group-title">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>
                            </svg>
                            Webhook 1ÔºöÁî¢ÁîüÁ§æÁæ§Ë≤ºÊñá
                        </h3>
                        <div class="setting-item">
                            <label>Webhook URL</label>
                            <div class="hint">Ëº∏ÂÖ•ÁêÉÂì°ÂßìÂêç ‚Üí Êü• Google Sheet ‚Üí Claude Áî¢ÁîüË≤ºÊñá ‚Üí ÂõûÂÇ≥ËçâÁ®ø</div>
                            <div class="input-with-button">
                                <input type="url" id="webhookGenerate" placeholder="https://hook.make.com/xxx...">
                                <button class="btn-test" onclick="testWebhook('generate')">Ê∏¨Ë©¶</button>
                            </div>
                            <div class="test-result" id="testResultGenerate"></div>
                        </div>
                    </div>

                    <!-- Webhook 2: Publish -->
                    <div class="settings-group">
                        <h3 class="settings-group-title">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M22 2 11 13"/>
                                <path d="m22 2-7 20-4-9-9-4 20-7z"/>
                            </svg>
                            Webhook 2ÔºöÁôºÂ∏ÉË≤ºÊñá
                        </h3>
                        <div class="setting-item">
                            <label>Webhook URL</label>
                            <div class="hint">Êé•Êî∂Ë≤ºÊñáÂÖßÂÆπ ‚Üí ÁôºÂ∏ÉÂà∞ Facebook / Instagram / Threads</div>
                            <div class="input-with-button">
                                <input type="url" id="webhookPublish" placeholder="https://hook.make.com/xxx...">
                                <button class="btn-test" onclick="testWebhook('publish')">Ê∏¨Ë©¶</button>
                            </div>
                            <div class="test-result" id="testResultPublish"></div>
                        </div>
                    </div>

                    <!-- Google Sheet -->
                    <div class="settings-group">
                        <h3 class="settings-group-title">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                                <line x1="3" y1="9" x2="21" y2="9"/>
                                <line x1="9" y1="21" x2="9" y2="9"/>
                            </svg>
                            Google Sheet Ë®≠ÂÆö
                        </h3>
                        <div class="setting-item">
                            <label>Google Sheet URL</label>
                            <div class="hint">ÁêÉÂì°Êï∏ÊìöË≥áÊñôÂ∫´ÁöÑ Google Sheet ÈÄ£Áµê</div>
                            <input type="url" id="googleSheetUrl" placeholder="https://docs.google.com/spreadsheets/d/xxx...">
                        </div>
                    </div>

                    <!-- Prompt Template -->
                    <div class="settings-group">
                        <h3 class="settings-group-title">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M12 20h9"/>
                                <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/>
                            </svg>
                            ÊèêÁ§∫Ë©ûË®≠ÂÆöÔºà‰æùÈÅãÂãï/‰ΩçÁΩÆÔºâ
                        </h3>
                        
                        <div class="setting-item">
                            <label>‚öæ Ê£íÁêÉ - ÊäïÊâã ÊèêÁ§∫Ë©û</label>
                            <textarea id="promptBaseballPitcher" rows="6"></textarea>
                        </div>
                        
                        <div class="setting-item">
                            <label>‚öæ Ê£íÁêÉ - ÈáéÊâã ÊèêÁ§∫Ë©û</label>
                            <textarea id="promptBaseballFielder" rows="6"></textarea>
                        </div>
                        
                        <div class="setting-item">
                            <label>üèÄ Á±ÉÁêÉ ÊèêÁ§∫Ë©û</label>
                            <textarea id="promptBasketball" rows="6"></textarea>
                        </div>
                        
                        <button class="btn btn-secondary" onclick="resetPrompts()" style="margin-top: 12px;">ÈáçË®≠ÁÇ∫È†êË®≠ÊèêÁ§∫Ë©û</button>
                    </div>

                    <!-- È¢®Ê†ºË®≠ÂÆö -->
                    <div class="settings-group">
                        <h3 class="settings-group-title">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"/>
                                <path d="M8 14s1.5 2 4 2 4-2 4-2"/>
                                <line x1="9" y1="9" x2="9.01" y2="9"/>
                                <line x1="15" y1="9" x2="15.01" y2="9"/>
                            </svg>
                            ÁôºÊñáÈ¢®Ê†ºË®≠ÂÆöÔºà5 Á®ÆÔºâ
                        </h3>
                        <div class="hint" style="margin-bottom: 16px; padding: 12px; background: var(--dark); border-radius: 8px;">
                            Ë®≠ÂÆöÊØèÁ®ÆÈ¢®Ê†ºÁöÑÂêçÁ®±ÂíåÊèèËø∞ÔºåÊèèËø∞ÊúÉ‰∏ÄËµ∑ÈÄÅÁµ¶ AI ‰ΩúÁÇ∫ÂèÉËÄÉ„ÄÇ
                        </div>
                        
                        <div class="style-setting-grid">
                            <div class="style-setting-item">
                                <div class="style-setting-header">
                                    <input type="text" id="style1Emoji" class="style-emoji-input" value="üì∞" maxlength="2">
                                    <input type="text" id="style1Name" value="Â∞àÊ•≠Ê≠£Âºè" placeholder="È¢®Ê†ºÂêçÁ®±">
                                </div>
                                <textarea id="style1Desc" rows="2" placeholder="È¢®Ê†ºÊèèËø∞">Áî®Ë©ûÁ≤æÊ∫ñ„ÄÅÂÆ¢ËßÄÂ†±Â∞éÔºåÈÅ©Âêà‰∏ªÊµÅÂ™íÈ´îÁôºÂ∏ÉÁöÑÊ≠£ÂºèÈ¢®Ê†º„ÄÇ</textarea>
                            </div>
                            
                            <div class="style-setting-item">
                                <div class="style-setting-header">
                                    <input type="text" id="style2Emoji" class="style-emoji-input" value="üî•" maxlength="2">
                                    <input type="text" id="style2Name" value="ÁÜ±Ë°ÄÊøÄÊòÇ" placeholder="È¢®Ê†ºÂêçÁ®±">
                                </div>
                                <textarea id="style2Desc" rows="2" placeholder="È¢®Ê†ºÊèèËø∞">ÂÖÖÊªøÁÜ±ÊÉÖËàáËÉΩÈáèÔºå‰ΩøÁî®Âº∑ÁÉàÁöÑÂΩ¢ÂÆπË©ûÂíåÊÑüÂòÜÂè•ÔºåËÆìËÆÄËÄÖÊÑüÂèóÊØîË≥ΩÁöÑÊøÄÊÉÖ„ÄÇ</textarea>
                            </div>
                            
                            <div class="style-setting-item">
                                <div class="style-setting-header">
                                    <input type="text" id="style3Emoji" class="style-emoji-input" value="üòÑ" maxlength="2">
                                    <input type="text" id="style3Name" value="ÂπΩÈªòÈ¢®Ë∂£" placeholder="È¢®Ê†ºÂêçÁ®±">
                                </div>
                                <textarea id="style3Desc" rows="2" placeholder="È¢®Ê†ºÊèèËø∞">ÈÅ©Áï∂Âä†ÂÖ•ÊúâË∂£ÁöÑÊØîÂñª„ÄÅÁ∂≤Ë∑ØÁî®Ë™ûÊàñËºïÈ¨ÜÁöÑË™ø‰æÉÔºåËÆìËÆÄËÄÖÊúÉÂøÉ‰∏ÄÁ¨ë„ÄÇ</textarea>
                            </div>
                            
                            <div class="style-setting-item">
                                <div class="style-setting-header">
                                    <input type="text" id="style4Emoji" class="style-emoji-input" value="üìä" maxlength="2">
                                    <input type="text" id="style4Name" value="Êï∏ÊìöÂàÜÊûê" placeholder="È¢®Ê†ºÂêçÁ®±">
                                </div>
                                <textarea id="style4Desc" rows="2" placeholder="È¢®Ê†ºÊèèËø∞">ËëóÈáçÊñºÊï∏ÊìöËß£ËÆÄ„ÄÅÁµ±Ë®àÊØîËºÉÂíåË∂®Âã¢ÂàÜÊûêÔºåÁî®Êï∏Â≠óË™™Ë©±„ÄÇ</textarea>
                            </div>
                            
                            <div class="style-setting-item">
                                <div class="style-setting-header">
                                    <input type="text" id="style5Emoji" class="style-emoji-input" value="üìñ" maxlength="2">
                                    <input type="text" id="style5Name" value="ÊïÖ‰∫ãÊïòËø∞" placeholder="È¢®Ê†ºÂêçÁ®±">
                                </div>
                                <textarea id="style5Desc" rows="2" placeholder="È¢®Ê†ºÊèèËø∞">ÊèèÁπ™ÊØîË≥ΩÊÉÖÂ¢É„ÄÅÁêÉÂì°ÂøÉË∑ØÊ≠∑Á®ãÔºåËÆìËÆÄËÄÖÊúâË∫´Ê≠∑ÂÖ∂Â¢ÉÁöÑÊÑüË¶∫„ÄÇ</textarea>
                            </div>
                        </div>
                        
                        <button class="btn btn-secondary" onclick="resetStyles()" style="margin-top: 12px;">ÈáçË®≠ÁÇ∫È†êË®≠È¢®Ê†º</button>
                    </div>

                    <div class="settings-actions">
                        <button class="btn btn-primary" onclick="saveSettings()">ÂÑ≤Â≠òË®≠ÂÆö</button>
                        <button class="btn btn-secondary" onclick="exportSettings()">ÂåØÂá∫Ë®≠ÂÆö</button>
                        <button class="btn btn-ghost" onclick="importSettings()">ÂåØÂÖ•Ë®≠ÂÆö</button>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="spinner"></div>
        <div class="loading-text" id="loadingText">Ê≠£Âú®Áî¢ÁîüË≤ºÊñá...</div>
    </div>

    <!-- Success Modal -->
    <div class="modal-overlay" id="successModal">
        <div class="modal">
            <div class="modal-icon success">
                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="20 6 9 17 4 12"/>
                </svg>
            </div>
            <h2>ÁôºÂ∏ÉÊàêÂäüÔºÅ</h2>
            <p>Ë≤ºÊñáÂ∑≤ÊàêÂäüÁôºÂ∏ÉÂà∞‰ª•‰∏ãÂπ≥Âè∞</p>
            <div class="publish-results" id="publishResults">
                <!-- Results will be populated -->
            </div>
            <button class="btn btn-primary" onclick="closeModal()">ÂÆåÊàê</button>
        </div>
    </div>

    <!-- Toast -->
    <div class="toast" id="toast">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="20 6 9 17 4 12"/>
        </svg>
        <span id="toastMessage">Êìç‰ΩúÊàêÂäü</span>
    </div>

    <script>
        // ==================== State ====================
        const state = {
            currentUser: null,
            draftContent: '',
            selectedPlatforms: [],
            selectedStyle: 'style1',
            uploadedPhoto: null,
            uploadedPhotoBase64: null,
            enableNewsSearch: false,
            isGenerating: false,
            isPublishing: false
        };

        // ==================== Default Style Options ====================
        const DEFAULT_STYLES = {
            style1: { name: 'Â∞àÊ•≠Ê≠£Âºè', emoji: 'üì∞', description: 'Áî®Ë©ûÁ≤æÊ∫ñ„ÄÅÂÆ¢ËßÄÂ†±Â∞éÔºåÈÅ©Âêà‰∏ªÊµÅÂ™íÈ´îÁôºÂ∏ÉÁöÑÊ≠£ÂºèÈ¢®Ê†º„ÄÇ' },
            style2: { name: 'ÁÜ±Ë°ÄÊøÄÊòÇ', emoji: 'üî•', description: 'ÂÖÖÊªøÁÜ±ÊÉÖËàáËÉΩÈáèÔºå‰ΩøÁî®Âº∑ÁÉàÁöÑÂΩ¢ÂÆπË©ûÂíåÊÑüÂòÜÂè•ÔºåËÆìËÆÄËÄÖÊÑüÂèóÊØîË≥ΩÁöÑÊøÄÊÉÖ„ÄÇ' },
            style3: { name: 'ÂπΩÈªòÈ¢®Ë∂£', emoji: 'üòÑ', description: 'ÈÅ©Áï∂Âä†ÂÖ•ÊúâË∂£ÁöÑÊØîÂñª„ÄÅÁ∂≤Ë∑ØÁî®Ë™ûÊàñËºïÈ¨ÜÁöÑË™ø‰æÉÔºåËÆìËÆÄËÄÖÊúÉÂøÉ‰∏ÄÁ¨ë„ÄÇ' },
            style4: { name: 'Êï∏ÊìöÂàÜÊûê', emoji: 'üìä', description: 'ËëóÈáçÊñºÊï∏ÊìöËß£ËÆÄ„ÄÅÁµ±Ë®àÊØîËºÉÂíåË∂®Âã¢ÂàÜÊûêÔºåÁî®Êï∏Â≠óË™™Ë©±„ÄÇ' },
            style5: { name: 'ÊïÖ‰∫ãÊïòËø∞', emoji: 'üìñ', description: 'ÊèèÁπ™ÊØîË≥ΩÊÉÖÂ¢É„ÄÅÁêÉÂì°ÂøÉË∑ØÊ≠∑Á®ãÔºåËÆìËÆÄËÄÖÊúâË∫´Ê≠∑ÂÖ∂Â¢ÉÁöÑÊÑüË¶∫„ÄÇ' }
        };

        // ==================== Default Prompts ====================
        const DEFAULT_PROMPTS = {
            baseballPitcher: `‰Ω†ÊòØ‰∏Ä‰ΩçÂ∞àÊ•≠ÁöÑÈ´îËÇ≤Á§æÁæ§Â∞èÁ∑®„ÄÇË´ãÊ†πÊìö‰ª•‰∏ãÊäïÊâãË≥áÊñôÔºåÊí∞ÂØ´‰∏ÄÁØáÈÅ©ÂêàÁ§æÁæ§Â™íÈ´îÁôºÂ∏ÉÁöÑË≤ºÊñá„ÄÇ

Ë¶ÅÊ±ÇÔºö
1. ÈñãÈ†≠Ë¶ÅÂê∏ÂºïÁúºÁêÉÔºåÂèØÁî®ÈÅ©Áï∂ÁöÑ emoji
2. ÈáçÈªûÁ™ÅÂá∫ÊäïÊâãË°®ÁèæÔºàÂ±ÄÊï∏„ÄÅÂ§±ÂàÜ„ÄÅ‰∏âÊåØ„ÄÅWHIP Á≠âÔºâ
3. ÈÅ©Âêà Facebook / Instagram / Threads ÁôºÂ∏É
4. Â≠óÊï∏Á¥Ñ 150-300 Â≠ó
5. ÁµêÂ∞æÂä†‰∏äÁõ∏ÈóúÁöÑ hashtag`,

            baseballFielder: `‰Ω†ÊòØ‰∏Ä‰ΩçÂ∞àÊ•≠ÁöÑÈ´îËÇ≤Á§æÁæ§Â∞èÁ∑®„ÄÇË´ãÊ†πÊìö‰ª•‰∏ãÈáéÊâãË≥áÊñôÔºåÊí∞ÂØ´‰∏ÄÁØáÈÅ©ÂêàÁ§æÁæ§Â™íÈ´îÁôºÂ∏ÉÁöÑË≤ºÊñá„ÄÇ

Ë¶ÅÊ±ÇÔºö
1. ÈñãÈ†≠Ë¶ÅÂê∏ÂºïÁúºÁêÉÔºåÂèØÁî®ÈÅ©Áï∂ÁöÑ emoji
2. ÈáçÈªûÁ™ÅÂá∫ÊâìÊìäË°®ÁèæÔºàÊâìÊìäÁéá„ÄÅÂÆâÊâì„ÄÅÂÖ®Â£òÊâì„ÄÅÊâìÈªûÁ≠âÔºâ
3. ÈÅ©Âêà Facebook / Instagram / Threads ÁôºÂ∏É
4. Â≠óÊï∏Á¥Ñ 150-300 Â≠ó
5. ÁµêÂ∞æÂä†‰∏äÁõ∏ÈóúÁöÑ hashtag`,

            basketball: `‰Ω†ÊòØ‰∏Ä‰ΩçÂ∞àÊ•≠ÁöÑÈ´îËÇ≤Á§æÁæ§Â∞èÁ∑®„ÄÇË´ãÊ†πÊìö‰ª•‰∏ãÁ±ÉÁêÉÂì°Ë≥áÊñôÔºåÊí∞ÂØ´‰∏ÄÁØáÈÅ©ÂêàÁ§æÁæ§Â™íÈ´îÁôºÂ∏ÉÁöÑË≤ºÊñá„ÄÇ

Ë¶ÅÊ±ÇÔºö
1. ÈñãÈ†≠Ë¶ÅÂê∏ÂºïÁúºÁêÉÔºåÂèØÁî®ÈÅ©Áï∂ÁöÑ emoji
2. ÈáçÈªûÁ™ÅÂá∫ÁêÉÂì°Ë°®ÁèæÔºàÂæóÂàÜ„ÄÅÁ±ÉÊùø„ÄÅÂä©Êîª„ÄÅÂëΩ‰∏≠ÁéáÁ≠âÔºâ
3. ÈÅ©Âêà Facebook / Instagram / Threads ÁôºÂ∏É
4. Â≠óÊï∏Á¥Ñ 150-300 Â≠ó
5. ÁµêÂ∞æÂä†‰∏äÁõ∏ÈóúÁöÑ hashtag`
        };

        // ==================== 50 Users ====================
        const DEFAULT_USERS = [
            { id: 'U001', username: 'reporter01', password: 'sp2025r01', name: 'Ë®òËÄÖ01' },
            { id: 'U002', username: 'reporter02', password: 'sp2025r02', name: 'Ë®òËÄÖ02' },
            { id: 'U003', username: 'reporter03', password: 'sp2025r03', name: 'Ë®òËÄÖ03' },
            { id: 'U004', username: 'reporter04', password: 'sp2025r04', name: 'Ë®òËÄÖ04' },
            { id: 'U005', username: 'reporter05', password: 'sp2025r05', name: 'Ë®òËÄÖ05' },
            { id: 'U006', username: 'reporter06', password: 'sp2025r06', name: 'Ë®òËÄÖ06' },
            { id: 'U007', username: 'reporter07', password: 'sp2025r07', name: 'Ë®òËÄÖ07' },
            { id: 'U008', username: 'reporter08', password: 'sp2025r08', name: 'Ë®òËÄÖ08' },
            { id: 'U009', username: 'reporter09', password: 'sp2025r09', name: 'Ë®òËÄÖ09' },
            { id: 'U010', username: 'reporter10', password: 'sp2025r10', name: 'Ë®òËÄÖ10' },
            { id: 'U011', username: 'reporter11', password: 'sp2025r11', name: 'Ë®òËÄÖ11' },
            { id: 'U012', username: 'reporter12', password: 'sp2025r12', name: 'Ë®òËÄÖ12' },
            { id: 'U013', username: 'reporter13', password: 'sp2025r13', name: 'Ë®òËÄÖ13' },
            { id: 'U014', username: 'reporter14', password: 'sp2025r14', name: 'Ë®òËÄÖ14' },
            { id: 'U015', username: 'reporter15', password: 'sp2025r15', name: 'Ë®òËÄÖ15' },
            { id: 'U016', username: 'reporter16', password: 'sp2025r16', name: 'Ë®òËÄÖ16' },
            { id: 'U017', username: 'reporter17', password: 'sp2025r17', name: 'Ë®òËÄÖ17' },
            { id: 'U018', username: 'reporter18', password: 'sp2025r18', name: 'Ë®òËÄÖ18' },
            { id: 'U019', username: 'reporter19', password: 'sp2025r19', name: 'Ë®òËÄÖ19' },
            { id: 'U020', username: 'reporter20', password: 'sp2025r20', name: 'Ë®òËÄÖ20' },
            { id: 'U021', username: 'reporter21', password: 'sp2025r21', name: 'Ë®òËÄÖ21' },
            { id: 'U022', username: 'reporter22', password: 'sp2025r22', name: 'Ë®òËÄÖ22' },
            { id: 'U023', username: 'reporter23', password: 'sp2025r23', name: 'Ë®òËÄÖ23' },
            { id: 'U024', username: 'reporter24', password: 'sp2025r24', name: 'Ë®òËÄÖ24' },
            { id: 'U025', username: 'reporter25', password: 'sp2025r25', name: 'Ë®òËÄÖ25' },
            { id: 'U026', username: 'reporter26', password: 'sp2025r26', name: 'Ë®òËÄÖ26' },
            { id: 'U027', username: 'reporter27', password: 'sp2025r27', name: 'Ë®òËÄÖ27' },
            { id: 'U028', username: 'reporter28', password: 'sp2025r28', name: 'Ë®òËÄÖ28' },
            { id: 'U029', username: 'reporter29', password: 'sp2025r29', name: 'Ë®òËÄÖ29' },
            { id: 'U030', username: 'reporter30', password: 'sp2025r30', name: 'Ë®òËÄÖ30' },
            { id: 'U031', username: 'reporter31', password: 'sp2025r31', name: 'Ë®òËÄÖ31' },
            { id: 'U032', username: 'reporter32', password: 'sp2025r32', name: 'Ë®òËÄÖ32' },
            { id: 'U033', username: 'reporter33', password: 'sp2025r33', name: 'Ë®òËÄÖ33' },
            { id: 'U034', username: 'reporter34', password: 'sp2025r34', name: 'Ë®òËÄÖ34' },
            { id: 'U035', username: 'reporter35', password: 'sp2025r35', name: 'Ë®òËÄÖ35' },
            { id: 'U036', username: 'reporter36', password: 'sp2025r36', name: 'Ë®òËÄÖ36' },
            { id: 'U037', username: 'reporter37', password: 'sp2025r37', name: 'Ë®òËÄÖ37' },
            { id: 'U038', username: 'reporter38', password: 'sp2025r38', name: 'Ë®òËÄÖ38' },
            { id: 'U039', username: 'reporter39', password: 'sp2025r39', name: 'Ë®òËÄÖ39' },
            { id: 'U040', username: 'reporter40', password: 'sp2025r40', name: 'Ë®òËÄÖ40' },
            { id: 'U041', username: 'reporter41', password: 'sp2025r41', name: 'Ë®òËÄÖ41' },
            { id: 'U042', username: 'reporter42', password: 'sp2025r42', name: 'Ë®òËÄÖ42' },
            { id: 'U043', username: 'reporter43', password: 'sp2025r43', name: 'Ë®òËÄÖ43' },
            { id: 'U044', username: 'reporter44', password: 'sp2025r44', name: 'Ë®òËÄÖ44' },
            { id: 'U045', username: 'reporter45', password: 'sp2025r45', name: 'Ë®òËÄÖ45' },
            { id: 'U046', username: 'reporter46', password: 'sp2025r46', name: 'Ë®òËÄÖ46' },
            { id: 'U047', username: 'reporter47', password: 'sp2025r47', name: 'Ë®òËÄÖ47' },
            { id: 'U048', username: 'reporter48', password: 'sp2025r48', name: 'Ë®òËÄÖ48' },
            { id: 'U049', username: 'reporter49', password: 'sp2025r49', name: 'Ë®òËÄÖ49' },
            { id: 'U050', username: 'reporter50', password: 'sp2025r50', name: 'Ë®òËÄÖ50' },
            { id: 'U099', username: 'admin', password: 'admin2025!', name: 'ÁÆ°ÁêÜÂì°' }
        ];

        // ==================== Settings ====================
        let SETTINGS = {
            webhookGenerate: '',
            webhookPublish: '',
            googleSheetUrl: '',
            // ‰∏âÁ®ÆÊèêÁ§∫Ë©û
            promptBaseballPitcher: DEFAULT_PROMPTS.baseballPitcher,
            promptBaseballFielder: DEFAULT_PROMPTS.baseballFielder,
            promptBasketball: DEFAULT_PROMPTS.basketball,
            // ‰∫îÁ®ÆÈ¢®Ê†º
            style1: DEFAULT_STYLES.style1,
            style2: DEFAULT_STYLES.style2,
            style3: DEFAULT_STYLES.style3,
            style4: DEFAULT_STYLES.style4,
            style5: DEFAULT_STYLES.style5
        };

        // ==================== DOM Elements ====================
        const loginScreen = document.getElementById('loginScreen');
        const appContainer = document.getElementById('appContainer');
        const loginForm = document.getElementById('loginForm');
        const draftContent = document.getElementById('draftContent');
        const draftStatus = document.getElementById('draftStatus');
        const publishBtn = document.getElementById('publishBtn');
        const loadingOverlay = document.getElementById('loadingOverlay');
        const loadingText = document.getElementById('loadingText');

        // ==================== Init ====================
        loadSettings();
        updateWebhookStatus();

        function updateWebhookStatus() {
            const statusEl = document.getElementById('webhookStatus');
            if (SETTINGS.webhookGenerate && SETTINGS.webhookGenerate.trim() !== '') {
                statusEl.style.background = 'rgba(46, 204, 113, 0.15)';
                statusEl.style.color = 'var(--success)';
                statusEl.innerHTML = '‚úì Webhook Â∑≤Ë®≠ÂÆöÔºåÂ∞áÈÄ£Êé• Make.com';
            } else {
                statusEl.style.background = 'rgba(243, 156, 18, 0.15)';
                statusEl.style.color = 'var(--warning)';
                statusEl.innerHTML = '‚ö† Â∞öÊú™Ë®≠ÂÆö WebhookÔºåÂ∞á‰ΩøÁî®Ê®°Êì¨Ë≥áÊñôÔºà<a href="#" onclick="document.querySelector(\'[data-page=settings]\').click(); return false;" style="color: var(--warning); text-decoration: underline;">ÂâçÂæÄË®≠ÂÆö</a>Ôºâ';
            }
        }

        // ==================== Login ====================
        loginForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const username = document.getElementById('loginUsername').value;
            const password = document.getElementById('loginPassword').value;

            const user = DEFAULT_USERS.find(u => u.username === username && u.password === password);
            
            if (user) {
                state.currentUser = user;
                document.getElementById('userName').textContent = user.name;
                document.getElementById('userAvatar').textContent = user.name.slice(-2, -1) || user.name[0];
                loginScreen.style.display = 'none';
                appContainer.classList.add('active');
                showToast(`Ê≠°Ëøé ${user.name}ÔºÅ`);
            } else {
                showToast('Â∏≥ËôüÊàñÂØÜÁ¢ºÈåØË™§', 'error');
            }
        });

        document.getElementById('logoutBtn').addEventListener('click', () => {
            state.currentUser = null;
            appContainer.classList.remove('active');
            loginScreen.style.display = 'flex';
            loginForm.reset();
            clearDraft();
        });

        // ==================== Navigation ====================
        document.querySelectorAll('.nav-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                const page = btn.dataset.page;
                document.querySelectorAll('.page-section').forEach(s => s.classList.remove('active'));
                document.getElementById(`page${page.charAt(0).toUpperCase() + page.slice(1)}`).classList.add('active');
            });
        });

        // ==================== Sport Type Change ====================
        document.getElementById('sportType').addEventListener('change', (e) => {
            const positionGroup = document.getElementById('positionGroup');
            const positionSelect = document.getElementById('position');
            const playerNameInput = document.getElementById('playerName');
            const newsHighlightInput = document.getElementById('newsHighlight');

            if (e.target.value === 'baseball') {
                positionGroup.style.display = 'block';
                positionSelect.innerHTML = `
                    <option value="">Ë´ãÈÅ∏Êìá</option>
                    <option value="pitcher">ÊäïÊâã</option>
                    <option value="fielder">ÈáéÊâã</option>
                `;
                playerNameInput.placeholder = '‰æãÂ¶ÇÔºöÊûóÂÆâÂèØ';
                newsHighlightInput.placeholder = '‰æãÂ¶ÇÔºö‰ªäÊó•3ÊâìÊï∏3ÂÆâÊâìÔºåÂåÖÂê´1ÁôºÊªøË≤´Á†≤ÔºåÂñÆÂ†¥7ÂàÜÊâìÈªûÂâµÁîüÊ∂ØÊñ∞È´ò...';
            } else if (e.target.value === 'basketball') {
                positionGroup.style.display = 'none';
                playerNameInput.placeholder = '‰æãÂ¶ÇÔºöÊûóÂøóÂÇë';
                newsHighlightInput.placeholder = '‰æãÂ¶ÇÔºö‰ªäÊó•Êîª‰∏ãÂÖ®Â†¥ÊúÄÈ´ò28ÂàÜÔºåÂ§ñÂ∏∂8Á±ÉÊùø5Âä©ÊîªÔºåÁ¨¨ÂõõÁØÄÁç®Êãø12ÂàÜÂ∏∂È†òÁêÉÈöäÈÄÜËΩâ...';
            } else {
                positionGroup.style.display = 'none';
                playerNameInput.placeholder = 'Ë´ãËº∏ÂÖ•ÁêÉÂì°ÂêçÂ≠ó';
                newsHighlightInput.placeholder = 'Ë´ãËº∏ÂÖ•‰ªäÊó•ÈáçÈªû...';
            }
        });

        // ==================== Style Selection ====================
        document.querySelectorAll('#styleOptions .option-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('#styleOptions .option-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                state.selectedStyle = btn.dataset.value;
            });
        });

        // ==================== News Search Toggle ====================
        document.getElementById('enableNewsSearch').addEventListener('change', (e) => {
            state.enableNewsSearch = e.target.checked;
        });

        // ==================== Photo Upload ====================
        const photoInput = document.getElementById('photoInput');
        const photoUploadArea = document.getElementById('photoUploadArea');
        const uploadPlaceholder = document.getElementById('uploadPlaceholder');
        const photoPreview = document.getElementById('photoPreview');
        const previewImage = document.getElementById('previewImage');
        const removePhotoBtn = document.getElementById('removePhotoBtn');

        photoUploadArea.addEventListener('click', () => {
            photoInput.click();
        });

        photoUploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            photoUploadArea.classList.add('dragover');
        });

        photoUploadArea.addEventListener('dragleave', () => {
            photoUploadArea.classList.remove('dragover');
        });

        photoUploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            photoUploadArea.classList.remove('dragover');
            const file = e.dataTransfer.files[0];
            if (file && file.type.startsWith('image/')) {
                handlePhotoUpload(file);
            }
        });

        photoInput.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (file) {
                handlePhotoUpload(file);
            }
        });

        removePhotoBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            clearPhoto();
        });

        function handlePhotoUpload(file) {
            if (file.size > 5 * 1024 * 1024) {
                showToast('ÁÖßÁâáÂ§ßÂ∞è‰∏çËÉΩË∂ÖÈÅé 5MB', 'error');
                return;
            }

            state.uploadedPhoto = file;

            // Convert to base64
            const reader = new FileReader();
            reader.onload = (e) => {
                state.uploadedPhotoBase64 = e.target.result;
                previewImage.src = e.target.result;
                uploadPlaceholder.style.display = 'none';
                photoPreview.style.display = 'inline-block';
                showToast('ÁÖßÁâáÂ∑≤‰∏äÂÇ≥');
            };
            reader.readAsDataURL(file);
        }

        function clearPhoto() {
            state.uploadedPhoto = null;
            state.uploadedPhotoBase64 = null;
            photoInput.value = '';
            previewImage.src = '';
            uploadPlaceholder.style.display = 'block';
            photoPreview.style.display = 'none';
        }

        // ==================== Get Current Prompt & Style ====================
        function getCurrentPrompt(sport, position) {
            if (sport === 'baseball') {
                if (position === 'pitcher') {
                    return SETTINGS.promptBaseballPitcher || DEFAULT_PROMPTS.baseballPitcher;
                } else {
                    return SETTINGS.promptBaseballFielder || DEFAULT_PROMPTS.baseballFielder;
                }
            } else {
                return SETTINGS.promptBasketball || DEFAULT_PROMPTS.basketball;
            }
        }

        function getCurrentStyle(styleKey) {
            return SETTINGS[styleKey] || DEFAULT_STYLES[styleKey];
        }

        // ==================== Generate Post ====================
        document.getElementById('generateBtn').addEventListener('click', async () => {
            const sportType = document.getElementById('sportType').value;
            const position = document.getElementById('position').value;
            const playerName = document.getElementById('playerName').value.trim();
            const newsHighlight = document.getElementById('newsHighlight').value.trim();

            if (!sportType) {
                showToast('Ë´ãÈÅ∏ÊìáÈÅãÂãïÈ°ûÂûã', 'error');
                return;
            }
            if (!playerName) {
                showToast('Ë´ãËº∏ÂÖ•ÁêÉÂì°ÂêçÂ≠ó', 'error');
                return;
            }
            if (sportType === 'baseball' && !position) {
                showToast('Ë´ãÈÅ∏Êìá‰ΩçÁΩÆ', 'error');
                return;
            }

            // Show loading
            showLoading('Ê≠£Âú®Áî¢ÁîüË≤ºÊñá...');

            // ÂèñÂæóÂ∞çÊáâÁöÑÊèêÁ§∫Ë©û
            const prompt = getCurrentPrompt(sportType, position);
            
            // ÂèñÂæóÈ¢®Ê†ºË®≠ÂÆö
            const styleData = getCurrentStyle(state.selectedStyle);

            // Ê∫ñÂÇôÈÄÅÂá∫ÁöÑË≥áÊñô
            const data = {
                // 1. ÈÅãÂãïÁ®ÆÈ°û
                sport: sportType === 'baseball' ? 'Ê£íÁêÉ' : 'Á±ÉÁêÉ',
                sportType: sportType,
                
                // 2. ‰ΩçÁΩÆ
                position: position === 'pitcher' ? 'ÊäïÊâã' : (position === 'fielder' ? 'ÈáéÊâã' : ''),
                positionType: position || '',
                
                // 3. ÁêÉÂì°ÂêçÂ≠ó
                playerName: playerName,
                
                // 4. ÁôºÊñáÈ¢®Ê†º
                styleKey: state.selectedStyle,
                styleName: styleData.name,
                styleEmoji: styleData.emoji,
                styleDescription: styleData.description,
                
                // 5. ÊèêÁ§∫Ë©ûÔºàÊ†πÊìöÈÅãÂãï/‰ΩçÁΩÆËá™ÂãïÂ∏∂ÂÖ•Ôºâ
                prompt: prompt,
                
                // 6. ‰ªäÊó•ÈáçÈªûË£úÂÖÖÔºàÈÅ∏Â°´Ôºâ
                newsHighlight: newsHighlight,
                
                // 7. ÊòØÂê¶ÂïüÂãïÊñ∞ËÅûÊêúÂ∞ã
                enableNewsSearch: state.enableNewsSearch,
                
                // 8. ‰ΩøÁî®ËÄÖË≥áË®ä
                userId: state.currentUser?.id || 'guest',
                userName: state.currentUser?.name || 'guest'
            };

            console.log('=== ÈÄÅÂá∫Ë≥áÊñôÂà∞Áî¢ÁîüË≤ºÊñá Webhook ===');
            console.log('ÈÅãÂãïÁ®ÆÈ°û:', data.sport);
            console.log('‰ΩçÁΩÆ:', data.position);
            console.log('ÁêÉÂì°:', data.playerName);
            console.log('È¢®Ê†º:', data.styleName, '-', data.styleDescription);
            console.log('ÈáçÈªûË£úÂÖÖ:', data.newsHighlight || '(ÁÑ°)');
            console.log('ÂïüÂãïÊñ∞ËÅûÊêúÂ∞ã:', data.enableNewsSearch);
            console.log('ÊèêÁ§∫Ë©û:', data.prompt);
            console.log('ÂÆåÊï¥Ë≥áÊñô:', JSON.stringify(data, null, 2));
            console.log('Webhook URL:', SETTINGS.webhookGenerate);

            // Call webhook or use mock
            if (SETTINGS.webhookGenerate && SETTINGS.webhookGenerate.trim() !== '') {
                try {
                    console.log('Calling webhook...');
                    const response = await fetch(SETTINGS.webhookGenerate, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(data)
                    });
                    
                    console.log('Response status:', response.status);
                    
                    // ÂòóË©¶Ëß£ÊûêÂõûÂÇ≥
                    let result;
                    const responseText = await response.text();
                    console.log('Response raw text:', responseText);
                    
                    try {
                        result = JSON.parse(responseText);
                    } catch (e) {
                        // Â¶ÇÊûú‰∏çÊòØ JSONÔºåÁõ¥Êé•Áï∂‰ΩúÊñáÂ≠óÂÖßÂÆπ
                        result = { content: responseText };
                    }
                    
                    console.log('Response parsed:', result);
                    
                    hideLoading();
                    
                    // ÊîØÊè¥Â§öÁ®ÆÂõûÂÇ≥Ê†ºÂºè
                    const content = result.content || result.text || result.message || result.data || (typeof result === 'string' ? result : null);
                    
                    if (content) {
                        setDraft(content);
                        console.log('‚úÖ Ë≤ºÊñáÂ∑≤ÊàêÂäüËºâÂÖ•Âà∞ËçâÁ®øÂçÄ');
                    } else {
                        console.error('ÁÑ°Ê≥ïËß£ÊûêÂõûÂÇ≥ÂÖßÂÆπ:', result);
                        showToast('Áî¢ÁîüÂ§±ÊïóÔºåË´ãÊ™¢Êü• Webhook ÂõûÂÇ≥Ê†ºÂºèÔºàÈúÄË¶Å content Ê¨Ñ‰ΩçÔºâ', 'error');
                    }
                } catch (error) {
                    hideLoading();
                    console.error('Webhook error:', error);
                    showToast('ÈÄ£Á∑öÂ§±ÊïóÔºö' + error.message, 'error');
                }
            } else {
                // Mock response - Ê≤íÊúâË®≠ÂÆö Webhook ÊôÇ‰ΩøÁî®
                console.log('No webhook configured, using mock data');
                showToast('ÊèêÁ§∫ÔºöÂ∞öÊú™Ë®≠ÂÆö WebhookÔºå‰ΩøÁî®Ê®°Êì¨Ë≥áÊñô', 'success');
                setTimeout(() => {
                    hideLoading();
                    const mockContent = generateMockPost(playerName, sportType, position, state.selectedStyle, newsHighlight);
                    setDraft(mockContent);
                }, 1500);
            }
        });

        function generateMockPost(name, sport, position, styleKey, highlight) {
            const style = getCurrentStyle(styleKey);
            const emoji = style.emoji;
            
            let content = '';
            
            if (sport === 'baseball') {
                if (position === 'pitcher') {
                    content = `${emoji} ${name} ‰ªäÊó•ÂÖàÁôºË°®Áèæ‰∫ÆÁúºÔºÅ

üìä ‰∏ªÊäï 6 Â±ÄÂÉÖÂ§± 2 ÂàÜ
üìä ‰∏âÊåØ 7 ‰∫∫„ÄÅWHIP 1.05
üìä ÁêÉÈÄüÁ∂≠ÊåÅ 145km/h ‰ª•‰∏ä

${highlight ? `üî• ÈáçÈªûÔºö${highlight}\n\n` : ''}ÈóúÈçµÊôÇÂàªÂ±ïÁèæÂ£ìÂà∂ÂäõÔºåÂπ´Âä©ÁêÉÈöäÊãø‰∏ãÈáçË¶ÅÂãùÂà©ÔºÅüí™

#CPBL #Ê£íÁêÉ #${name} #ÊäïÊâã`;
                } else {
                    content = `${emoji} ${name} ‰ªäÊó•ÈñãËΩüÔºÅ

üî• ÊâìÊìäË°®ÁèæË∂ÖÁÅ´Ááô
üìä 4 ÊâìÊï∏ 3 ÂÆâÊâì
üìä 1 ÁôºÂÖ®Â£òÊâì„ÄÅ3 ÂàÜÊâìÈªû
üìä Êú¨Â≠£ÊâìÊìäÁéá .325

${highlight ? `üí• ÈáçÈªûÔºö${highlight}\n\n` : ''}ÈóúÈçµÊôÇÂàªÁöÑÂèØÈù†ÊâìËÄÖÔºÅüëä

#CPBL #Ê£íÁêÉ #${name} #ÂÖ®Â£òÊâì`;
                }
            } else {
                content = `${emoji} ${name} ‰∏ªÂÆ∞ÊØîË≥ΩÔºÅ

‰ªäÊó•Êï∏ÊìöË∂Ö‰∫ÆÁúº üî•
üìä 22 ÂàÜ 8 Á±ÉÊùø 6 Âä©Êîª
üìä ÂëΩ‰∏≠Áéá 52%
üìä ‰∏âÂàÜÁêÉ 4/7

${highlight ? `üèÜ ÈáçÈªûÔºö${highlight}\n\n` : ''}MVP Á¥öË°®ÁèæÔºÅüèÜ

#PLG #Á±ÉÁêÉ #${name}`;
            }

            return content;
        }

        function setDraft(content) {
            draftContent.value = content;
            draftContent.disabled = false;
            state.draftContent = content;
            updateCharCount();
            updateDraftStatus(true);
            publishBtn.disabled = false;
            showToast('Ë≤ºÊñáÂ∑≤Áî¢ÁîüÔºåÂèØÁ∑®ËºØÂæåÁôºÂ∏É');
        }

        function clearDraft() {
            draftContent.value = '';
            draftContent.disabled = true;
            state.draftContent = '';
            state.selectedPlatforms = [];
            document.querySelectorAll('.platform-checkbox').forEach(cb => cb.classList.remove('selected'));
            document.querySelectorAll('.platform-checkbox input').forEach(i => i.checked = false);
            updateCharCount();
            updateDraftStatus(false);
            publishBtn.disabled = true;
            // Ê∏ÖÈô§ÁÖßÁâá
            clearPhoto();
        }

        document.getElementById('clearBtn').addEventListener('click', clearDraft);

        function updateDraftStatus(ready) {
            if (ready) {
                draftStatus.classList.add('ready');
                draftStatus.innerHTML = '<span class="draft-status-dot"></span><span>ÂèØÁôºÂ∏É</span>';
            } else {
                draftStatus.classList.remove('ready');
                draftStatus.innerHTML = '<span class="draft-status-dot"></span><span>Á≠âÂæÖÁî¢Áîü</span>';
            }
        }

        // ==================== Draft Editor ====================
        draftContent.addEventListener('input', () => {
            state.draftContent = draftContent.value;
            updateCharCount();
        });

        function updateCharCount() {
            document.getElementById('charCount').textContent = draftContent.value.length;
        }

        // ==================== Platform Selection ====================
        document.querySelectorAll('.platform-checkbox').forEach(cb => {
            cb.addEventListener('click', () => {
                const input = cb.querySelector('input');
                input.checked = !input.checked;
                cb.classList.toggle('selected', input.checked);
                
                state.selectedPlatforms = Array.from(document.querySelectorAll('.platform-checkbox input:checked'))
                    .map(i => i.value);
                
                console.log('Â∑≤ÈÅ∏ÊìáÂπ≥Âè∞:', state.selectedPlatforms);
            });
        });

        // ==================== Publish ====================
        document.getElementById('publishBtn').addEventListener('click', async () => {
            const content = draftContent.value.trim();
            
            if (!content) {
                showToast('Ë´ãÂÖàÁî¢ÁîüË≤ºÊñáÂÖßÂÆπ', 'error');
                return;
            }

            if (state.selectedPlatforms.length === 0) {
                showToast('Ë´ãËá≥Â∞ëÈÅ∏Êìá‰∏ÄÂÄãÁôºÂ∏ÉÂπ≥Âè∞', 'error');
                return;
            }

            // Ê™¢Êü• IG ÊòØÂê¶Êúâ‰∏äÂÇ≥ÁÖßÁâá
            if (state.selectedPlatforms.includes('instagram') && !state.uploadedPhotoBase64) {
                showToast('ÁôºÂ∏ÉÂà∞ Instagram ÂøÖÈ†à‰∏äÂÇ≥ÁÖßÁâá', 'error');
                return;
            }

            showLoading('Ê≠£Âú®ÁôºÂ∏ÉË≤ºÊñá...');

            const data = {
                content: content,
                platforms: state.selectedPlatforms,
                userId: state.currentUser?.id || 'guest',
                userName: state.currentUser?.name || 'guest',
                playerName: document.getElementById('playerName').value,
                sport: document.getElementById('sportType').value,
                // ÊòØÂê¶ÁÇ∫ÂúñÁâáÁôºÊñá
                isImagePost: !!state.uploadedPhotoBase64,
                // ÁÖßÁâáÔºàÂ¶ÇÊûúÊúâÔºâ
                hasPhoto: !!state.uploadedPhotoBase64,
                photo: state.uploadedPhotoBase64 || null,
                photoFileName: state.uploadedPhoto?.name || null
            };

            console.log('=== ÁôºÂ∏ÉË≥áÊñô ===');
            console.log('Âπ≥Âè∞:', data.platforms);
            console.log('ÊòØÂê¶ÁÇ∫ÂúñÁâáÁôºÊñá:', data.isImagePost);
            console.log('Webhook URL:', SETTINGS.webhookPublish);

            if (SETTINGS.webhookPublish && SETTINGS.webhookPublish.trim() !== '') {
                try {
                    console.log('Calling publish webhook...');
                    const response = await fetch(SETTINGS.webhookPublish, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(data)
                    });
                    
                    console.log('Response status:', response.status);
                    
                    // Ëß£ÊûêÂõûÊáâ
                    let result;
                    const responseText = await response.text();
                    console.log('Response raw:', responseText);
                    
                    try {
                        result = JSON.parse(responseText);
                    } catch (e) {
                        result = { success: response.ok, message: responseText };
                    }
                    
                    console.log('Response parsed:', result);
                    hideLoading();
                    
                    // Ê†πÊìö Webhook ÂõûÊáâÊ±∫ÂÆöÊòØÂê¶ÊàêÂäü
                    if (response.ok && (result.success !== false)) {
                        console.log('‚úÖ ÁôºÂ∏ÉÊàêÂäü');
                        showSuccessModal(state.selectedPlatforms, result);
                    } else {
                        console.error('‚ùå ÁôºÂ∏ÉÂ§±Êïó:', result);
                        showToast('ÁôºÂ∏ÉÂ§±ÊïóÔºö' + (result.message || result.error || 'Êú™Áü•ÈåØË™§'), 'error');
                    }
                } catch (error) {
                    hideLoading();
                    console.error('Webhook error:', error);
                    showToast('ÁôºÂ∏ÉÂ§±ÊïóÔºö' + error.message, 'error');
                }
            } else {
                // Mock - Ê≤íÊúâË®≠ÂÆö Webhook
                console.log('No webhook configured, using mock');
                showToast('ÊèêÁ§∫ÔºöÂ∞öÊú™Ë®≠ÂÆöÁôºÂ∏É WebhookÔºå‰ΩøÁî®Ê®°Êì¨ÁôºÂ∏É', 'success');
                setTimeout(() => {
                    hideLoading();
                    showSuccessModal(state.selectedPlatforms, { success: true });
                }, 1500);
            }
        });

        // ==================== Modal ====================
        function showSuccessModal(platforms, webhookResult = {}) {
            const resultsDiv = document.getElementById('publishResults');
            resultsDiv.innerHTML = platforms.map(p => `
                <div class="publish-result-item">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="20 6 9 17 4 12"/>
                    </svg>
                    <span>${p.charAt(0).toUpperCase() + p.slice(1)}</span>
                    <span style="margin-left: auto; color: var(--success);">Â∑≤ÁôºÂ∏É</span>
                </div>
            `).join('');
            
            // Â¶ÇÊûú Webhook ÊúâÂõûÂÇ≥È°çÂ§ñË≥áË®äÔºåÈ°ØÁ§∫Âá∫‰æÜ
            if (webhookResult.postUrl || webhookResult.postId) {
                resultsDiv.innerHTML += `
                    <div style="margin-top: 12px; padding-top: 12px; border-top: 1px solid var(--border); font-size: 0.85rem; color: var(--text-muted);">
                        ${webhookResult.postId ? `Ë≤ºÊñá ID: ${webhookResult.postId}` : ''}
                        ${webhookResult.postUrl ? `<br><a href="${webhookResult.postUrl}" target="_blank" style="color: var(--primary);">Êü•ÁúãË≤ºÊñá</a>` : ''}
                    </div>
                `;
            }
            
            document.getElementById('successModal').classList.add('active');
        }

        function closeModal() {
            document.getElementById('successModal').classList.remove('active');
            clearDraft();
            document.getElementById('playerName').value = '';
            document.getElementById('sportType').value = '';
            document.getElementById('positionGroup').style.display = 'none';
        }

        // ==================== Loading ====================
        function showLoading(text) {
            loadingText.textContent = text;
            loadingOverlay.classList.add('active');
        }

        function hideLoading() {
            loadingOverlay.classList.remove('active');
        }

        // ==================== Toast ====================
        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            const toastMessage = document.getElementById('toastMessage');
            toast.classList.remove('success', 'error');
            toast.classList.add(type);
            toastMessage.textContent = message;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 3000);
        }

        // ==================== Settings ====================
        function loadSettings() {
            const saved = localStorage.getItem('sportpress_settings');
            if (saved) {
                const parsed = JSON.parse(saved);
                SETTINGS = { ...SETTINGS, ...parsed };
            }
            
            // Webhook
            document.getElementById('webhookGenerate').value = SETTINGS.webhookGenerate || '';
            document.getElementById('webhookPublish').value = SETTINGS.webhookPublish || '';
            document.getElementById('googleSheetUrl').value = SETTINGS.googleSheetUrl || '';
            
            // ÊèêÁ§∫Ë©û
            document.getElementById('promptBaseballPitcher').value = SETTINGS.promptBaseballPitcher || DEFAULT_PROMPTS.baseballPitcher;
            document.getElementById('promptBaseballFielder').value = SETTINGS.promptBaseballFielder || DEFAULT_PROMPTS.baseballFielder;
            document.getElementById('promptBasketball').value = SETTINGS.promptBasketball || DEFAULT_PROMPTS.basketball;
            
            // È¢®Ê†º
            const style1 = SETTINGS.style1 || DEFAULT_STYLES.style1;
            const style2 = SETTINGS.style2 || DEFAULT_STYLES.style2;
            const style3 = SETTINGS.style3 || DEFAULT_STYLES.style3;
            const style4 = SETTINGS.style4 || DEFAULT_STYLES.style4;
            const style5 = SETTINGS.style5 || DEFAULT_STYLES.style5;
            
            document.getElementById('style1Emoji').value = style1.emoji;
            document.getElementById('style1Name').value = style1.name;
            document.getElementById('style1Desc').value = style1.description;
            document.getElementById('style2Emoji').value = style2.emoji;
            document.getElementById('style2Name').value = style2.name;
            document.getElementById('style2Desc').value = style2.description;
            document.getElementById('style3Emoji').value = style3.emoji;
            document.getElementById('style3Name').value = style3.name;
            document.getElementById('style3Desc').value = style3.description;
            document.getElementById('style4Emoji').value = style4.emoji;
            document.getElementById('style4Name').value = style4.name;
            document.getElementById('style4Desc').value = style4.description;
            document.getElementById('style5Emoji').value = style5.emoji;
            document.getElementById('style5Name').value = style5.name;
            document.getElementById('style5Desc').value = style5.description;
            
            // Êõ¥Êñ∞ÊåâÈàïÈ°ØÁ§∫
            updateStyleButtons();
        }

        function saveSettings() {
            SETTINGS = {
                webhookGenerate: document.getElementById('webhookGenerate').value.trim(),
                webhookPublish: document.getElementById('webhookPublish').value.trim(),
                googleSheetUrl: document.getElementById('googleSheetUrl').value.trim(),
                
                // ÊèêÁ§∫Ë©û
                promptBaseballPitcher: document.getElementById('promptBaseballPitcher').value,
                promptBaseballFielder: document.getElementById('promptBaseballFielder').value,
                promptBasketball: document.getElementById('promptBasketball').value,
                
                // È¢®Ê†º
                style1: {
                    name: document.getElementById('style1Name').value,
                    emoji: document.getElementById('style1Emoji').value || 'üì∞',
                    description: document.getElementById('style1Desc').value
                },
                style2: {
                    name: document.getElementById('style2Name').value,
                    emoji: document.getElementById('style2Emoji').value || 'üî•',
                    description: document.getElementById('style2Desc').value
                },
                style3: {
                    name: document.getElementById('style3Name').value,
                    emoji: document.getElementById('style3Emoji').value || 'üòÑ',
                    description: document.getElementById('style3Desc').value
                },
                style4: {
                    name: document.getElementById('style4Name').value,
                    emoji: document.getElementById('style4Emoji').value || 'üìä',
                    description: document.getElementById('style4Desc').value
                },
                style5: {
                    name: document.getElementById('style5Name').value,
                    emoji: document.getElementById('style5Emoji').value || 'üìñ',
                    description: document.getElementById('style5Desc').value
                }
            };
            
            localStorage.setItem('sportpress_settings', JSON.stringify(SETTINGS));
            console.log('Settings saved:', SETTINGS);
            updateWebhookStatus();
            updateStyleButtons();
            showToast('Ë®≠ÂÆöÂ∑≤ÂÑ≤Â≠ò');
        }
        
        function updateStyleButtons() {
            const buttons = document.querySelectorAll('#styleOptions .option-btn');
            const styles = ['style1', 'style2', 'style3', 'style4', 'style5'];
            
            buttons.forEach((btn, index) => {
                const style = SETTINGS[styles[index]] || DEFAULT_STYLES[styles[index]];
                btn.textContent = `${style.emoji} ${style.name}`;
            });
        }
        
        function resetPrompts() {
            document.getElementById('promptBaseballPitcher').value = DEFAULT_PROMPTS.baseballPitcher;
            document.getElementById('promptBaseballFielder').value = DEFAULT_PROMPTS.baseballFielder;
            document.getElementById('promptBasketball').value = DEFAULT_PROMPTS.basketball;
            showToast('ÊèêÁ§∫Ë©ûÂ∑≤ÈáçË®≠');
        }
        
        function resetStyles() {
            document.getElementById('style1Emoji').value = DEFAULT_STYLES.style1.emoji;
            document.getElementById('style1Name').value = DEFAULT_STYLES.style1.name;
            document.getElementById('style1Desc').value = DEFAULT_STYLES.style1.description;
            document.getElementById('style2Emoji').value = DEFAULT_STYLES.style2.emoji;
            document.getElementById('style2Name').value = DEFAULT_STYLES.style2.name;
            document.getElementById('style2Desc').value = DEFAULT_STYLES.style2.description;
            document.getElementById('style3Emoji').value = DEFAULT_STYLES.style3.emoji;
            document.getElementById('style3Name').value = DEFAULT_STYLES.style3.name;
            document.getElementById('style3Desc').value = DEFAULT_STYLES.style3.description;
            document.getElementById('style4Emoji').value = DEFAULT_STYLES.style4.emoji;
            document.getElementById('style4Name').value = DEFAULT_STYLES.style4.name;
            document.getElementById('style4Desc').value = DEFAULT_STYLES.style4.description;
            document.getElementById('style5Emoji').value = DEFAULT_STYLES.style5.emoji;
            document.getElementById('style5Name').value = DEFAULT_STYLES.style5.name;
            document.getElementById('style5Desc').value = DEFAULT_STYLES.style5.description;
            showToast('È¢®Ê†ºÂ∑≤ÈáçË®≠');
        }

        async function testWebhook(type) {
            const inputId = type === 'generate' ? 'webhookGenerate' : 'webhookPublish';
            const resultId = type === 'generate' ? 'testResultGenerate' : 'testResultPublish';
            const url = document.getElementById(inputId).value;
            const resultEl = document.getElementById(resultId);

            if (!url) {
                resultEl.className = 'test-result error';
                resultEl.textContent = 'Ë´ãÂÖàËº∏ÂÖ• Webhook URL';
                return;
            }

            resultEl.className = 'test-result';
            resultEl.style.display = 'block';
            resultEl.style.background = 'var(--dark-card)';
            resultEl.style.color = 'var(--text-muted)';
            resultEl.textContent = 'Ê∏¨Ë©¶‰∏≠...';

            try {
                const response = await fetch(url, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ test: true })
                });
                
                if (response.ok) {
                    resultEl.className = 'test-result success';
                    resultEl.textContent = '‚úì ÈÄ£Á∑öÊàêÂäüÔºÅ';
                } else {
                    resultEl.className = 'test-result error';
                    resultEl.textContent = `‚úó ÈÄ£Á∑öÂ§±Êïó (HTTP ${response.status})`;
                }
            } catch (error) {
                resultEl.className = 'test-result error';
                resultEl.textContent = `‚úó ÈÄ£Á∑öÈåØË™§`;
            }
        }

        function insertVariable(varName) {
            const textarea = document.getElementById('promptTemplate');
            const start = textarea.selectionStart;
            const end = textarea.selectionEnd;
            const text = textarea.value;
            const variable = `{{${varName}}}`;
            textarea.value = text.substring(0, start) + variable + text.substring(end);
            textarea.selectionStart = textarea.selectionEnd = start + variable.length;
            textarea.focus();
        }

        function exportSettings() {
            const blob = new Blob([JSON.stringify(SETTINGS, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'sportpress_settings.json';
            a.click();
            showToast('Ë®≠ÂÆöÂ∑≤ÂåØÂá∫');
        }

        function importSettings() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            input.onchange = (e) => {
                const reader = new FileReader();
                reader.onload = (event) => {
                    try {
                        const parsed = JSON.parse(event.target.result);
                        SETTINGS = { ...SETTINGS, ...parsed };
                        localStorage.setItem('sportpress_settings', JSON.stringify(SETTINGS));
                        loadSettings();
                        showToast('Ë®≠ÂÆöÂ∑≤ÂåØÂÖ•');
                    } catch {
                        showToast('ÂåØÂÖ•Â§±Êïó', 'error');
                    }
                };
                reader.readAsText(e.target.files[0]);
            };
            input.click();
        }
    </script>
</body>
</html>
